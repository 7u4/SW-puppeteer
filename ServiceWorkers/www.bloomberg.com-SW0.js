!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://assets.bwbx.io/s3/navi/js/",n(n.s=221)}({106:function(e,t,n){"use strict";var r=n(63),o=n.n(r),i=n(121),s=n(91),a=n(123),u=n.n(a),c=n(37),f=n(124),l=[404];function d(e,t,n){var r="https://nova.bloomberg.com/wss/pushprefsvc"+e,o={method:t,cache:"no-cache",headers:{"Content-Type":"application/json"}};return n&&(o.body=JSON.stringify(n)),fetch(r,o).then(function(e){var t=e.ok,n=e.status,r=e.statusText;return e.json().then(function(e){return t?Promise.resolve({status:n,json:e}):Promise.reject({status:n,json:e})},function(){return t?Promise.resolve({status:n,message:r}):Promise.reject({status:n,message:r})})})}var p=function(){function e(){}return e.getUserInfo=function(){return{sessionId:o.a.get(f.f)||null,bconnectId:o.a.get(f.a)||null,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone||null}},e.getResourceIdFromDatabase=function(){return i.a.get(f.c)},e.setResourceIdInDatabase=function(e){return i.a.set(f.c,e)},e.deleteResourceIdFromDatabase=function(){return i.a.delete(f.c)},e.getDeviceInfoFromDatabase=function(){return i.a.get(f.b)},e.setDeviceInfoInDatabase=function(e){return i.a.set(f.b,e)},e.deleteDeviceInfoFromDatabase=function(){return i.a.delete(f.b)},e.getUserInfoFromDatabase=function(){return i.a.get(f.d)},e.setUserInfoInDatabase=function(e){return i.a.set(f.d,e)},e.deleteUserInfoFromDatabase=function(){return i.a.delete(f.d)},e.createSubscriptionOnServer=function(e,t){return d("/subscriptions","POST",{deviceInfo:e,userInfo:t}).then(function(e){return e.json.id})},e.deleteSubscriptionOnServer=function(e){return d("/subscriptions/"+e,"DELETE").catch(function(e){var t=e.status,n=e.message;if(l.includes(t))return Promise.resolve({status:t});throw new Error(n)})},e.updateDeviceInfoOnServer=function(e,t){return d("/subscriptions/"+e+"/device-info","PUT",{deviceInfo:t})},e.getPushSubscriptionObject=function(){return navigator.serviceWorker.ready.then(function(e){return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:u()("BIhoFE1zepugxCExeqrmwTWS7luKK20rj4BhJ9O0sUyvUs1iwJO7Cn2LpPCHgNT0E4qMfnZGgNqLmdeBkNVOuWw")})}).then(function(e){return e.toJSON()})},e.deletePushSubscriptionObject=function(){return navigator.serviceWorker.ready.then(function(e){return e.pushManager.getSubscription().then(function(e){if(e)return e.unsubscribe()})})},e.trackGTMEvent=function(e){if(!f.e.hasOwnProperty(e))throw Error("trackGTMEvent: invalid eventType");c.a.recordCustomEvent("webPush",f.e[e])},e.subscribe=function(){return e.getPushSubscriptionObject().then(function(t){var n=e.getUserInfo();return console.info("DEBUG: subscribe with subs obj",t),e.createSubscriptionOnServer(t,n).then(function(r){return Promise.all([e.setUserInfoInDatabase(n),e.setDeviceInfoInDatabase(t),e.setResourceIdInDatabase(r)])})})},e.subscribeByClick=function(){return e.unsubscribe().then(function(){return new Promise(function(e){return setTimeout(e,1e3)})}).then(e.subscribe).then(function(){return e.trackGTMEvent(f.g)}).catch(function(t){"denied"===Notification.permission?(console.warn("Permission for notifications was denied"),e.trackGTMEvent(f.h)):console.error("Failed to subscribe the user: ",t.message)})},e.subscribeProgrammatically=function(){return e.unsubscribe().then(function(){return new Promise(function(e){return setTimeout(e,1e3)})}).then(e.subscribe).then(function(){return e.trackGTMEvent(f.i)}).catch(function(e){console.error("Failed to subscribe the user: ",e.message)})},e.unsubscribe=function(){return e.deletePushSubscriptionObject().then(function(){return e.getResourceIdFromDatabase().then(function(t){if(t)return e.deleteSubscriptionOnServer(t)}).then(function(){return Promise.all([e.deleteResourceIdFromDatabase(),e.deleteUserInfoFromDatabase(),e.deleteDeviceInfoFromDatabase()])})})},e.resubscribeIfRequired=function(){return Promise.all([e.getUserInfoFromDatabase(),e.getDeviceInfoFromDatabase(),e.getPushSubscriptionObject(),e.getUserInfo()]).then(function(t){var n=t[0],r=t[1],o=t[2],i=t[3];if(JSON.stringify(n)!==JSON.stringify(i)||JSON.stringify(r)!==JSON.stringify(o))return console.info("DEBUG: resubscribeIfRequired is different"),e.unsubscribe().then(function(){return new Promise(function(e){return setTimeout(e,1e3)})}).then(e.subscribe);console.info("DEBUG: resubscribeIfRequired is the same")})},e.updateDeviceInfo=function(t){return e.getResourceIdFromDatabase().then(function(n){return n?e.getDeviceInfoFromDatabase().then(function(r){if(JSON.stringify(r)!==JSON.stringify(t))return e.updateDeviceInfoOnServer(n,t).then(function(){return e.setDeviceInfoInDatabase(t)}).then(function(){return e.trackGTMEvent(f.j)});console.info("DEBUG: updateDeviceInfo: deviceInfo is the same")}):Promise.reject(new Error("Update device info failed: No resource ID"))})},e.syncSubscriptionStatus=function(){return s.a.isWebPushSupported()?e.getResourceIdFromDatabase().then(function(t){return"granted"===Notification.permission&&t?e.resubscribeIfRequired():"granted"!==Notification.permission||t?"granted"!==Notification.permission&&t?e.unsubscribe():void 0:e.subscribeProgrammatically()}).catch(function(e){console.error(e)}):Promise.resolve()},e}();t.a=p},121:function(e,t,n){"use strict";var r=n(122),o=(n.n(r),new r.Store("bloomberg","push-notifications")),i=function(){function e(){}return e.set=function(e,t){return Object(r.set)(e,t,o)},e.get=function(e){return Object(r.get)(e,o)},e.delete=function(e){return Object(r.del)(e,o)},e}();t.a=i},122:function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keyval-store",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keyval";(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.storeName=n,this._dbp=new Promise(function(e,r){var o=indexedDB.open(t,1);o.onerror=function(){return r(o.error)},o.onsuccess=function(){return e(o.result)},o.onupgradeneeded=function(){o.result.createObjectStore(n)}})}return r(e,[{key:"_withIDBStore",value:function(e,t){var n=this;return this._dbp.then(function(r){return new Promise(function(o,i){var s=r.transaction(n.storeName,e);s.oncomplete=function(){return o()},s.onabort=s.onerror=function(){return i(s.error)},t(s.objectStore(n.storeName))})})}}]),e}(),i=void 0;function s(){return i||(i=new o),i}t.Store=o,t.get=function(e){var t=void 0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:s())._withIDBStore("readonly",function(n){t=n.get(e)}).then(function(){return t.result})},t.set=function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:s())._withIDBStore("readwrite",function(n){n.put(t,e)})},t.del=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:s())._withIDBStore("readwrite",function(t){t.delete(e)})},t.clear=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:s())._withIDBStore("readwrite",function(e){e.clear()})},t.keys=function(){var e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:s())._withIDBStore("readonly",function(t){(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}}).then(function(){return e})}},123:function(e,t,n){"use strict";e.exports=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}},124:function(e,t,n){"use strict";var r;n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return a}),n.d(t,"a",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"i",function(){return f}),n.d(t,"j",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"e",function(){return p});var o="resource_id",i="device_info",s="user_info",a="session_id",u="_breg-uid",c="SUBSCRIBE_CLICK",f="SUBSCRIBE_PROGRAMMATIC",l="UPDATE_DEVICE_INFO",d="SUBSCRIBE_CLICK_BLOCK",p=((r={})[c]={category:"engagement",action:"click",label:"pushprompt_allow"},r[f]={category:"engagement",action:"programmatic_subscribe",label:"pushprompt_allow"},r[l]={category:"engagement",action:"programmatic_update",label:"push_update_device_info"},r[d]={category:"engagement",action:"click",label:"pushprompt_block"},r)},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(222).a.init()},222:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(106),o={body:"",icon:"https://assets.bwbx.io/s3/navi/images/push-icon-d5d01ebddb.png",vibrate:[100,50,100],data:{},actions:[{action:"explore",title:"Go to the site"},{action:"close",title:"Close the notification"}]},i=function(){function e(){}return e.init=function(){self.addEventListener("install",e.onServiceWorkerInstalled),self.addEventListener("activate",e.onServiceWorkerActivated),self.addEventListener("push",e.onPushReceived),self.addEventListener("notificationclose",e.onNotificationClosed),self.addEventListener("notificationclick",function(t){return t.waitUntil(e.onNotificationClicked(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onPushSubscriptionChange())})},e.onServiceWorkerInstalled=function(e){e.waitUntil(self.skipWaiting())},e.onServiceWorkerActivated=function(e){e.waitUntil(self.clients.claim())},e.parseReceivedPushData=function(e){var t,n;try{t=e.data.json()}catch(e){throw new Error("Json parse error",e)}var r=t.data,i=r.title,s=r.body,a=r.link,u=r.campaignId;if(!(i&&s&&a&&u))throw new Error("Missing arguments");try{var c=new URL(a);c.searchParams.set("utm_source","webpush"),c.searchParams.set("utm_campaign",u),n=c.toString()}catch(e){throw new Error("Invalid link URL",e)}var f={body:s,data:{dateOfArrival:Date.now(),campaignId:u,link:n}};return{title:i,options:Object.assign({},o,f)}},e.onPushReceived=function(t){var n=e.parseReceivedPushData(t),r=n.title,o=n.options;t.waitUntil(self.registration.showNotification(r,o))},e.onNotificationClosed=function(e){console.log(e)},e.onNotificationClicked=function(e){var t=e.action,n=e.notification,r=n.data.link;"close"!==t&&(self.clients.openWindow(r),n.close())},e.onPushSubscriptionChange=function(){return self.registration.pushManager.getSubscription().then(function(e){if(e)return r.a.updateDeviceInfo(e.toJSON())})},e}()},37:function(e,t,n){"use strict";var r={recordCustomEvent:function(e,t){var n=void 0===t?{}:t,r=n.category,o=n.action,i=n.label;this.pushEvent({event:e,eventCategory:r,eventAction:o,eventLabel:i})},pushEvent:function(e){"undefined"!=typeof window&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push(e))}};t.a=r},41:function(e,t,n){"use strict";var r="bb-pageview-tracker";function o(){var e;try{if((e=JSON.parse(localStorage.getItem(r))).find(function(e){return"number"!=typeof e}))return[]}catch(e){}return Array.isArray(e)?e:[]}var i={track:function(){var e=o();e.push(Date.now());var t=e.slice(-10);localStorage.setItem(r,JSON.stringify(t))},hasEnoughPageViews:function(e,t){if(void 0===e&&(e=2),void 0===t&&(t=2592e6),e<=0)return!0;var n=o();return!(n.length<e)&&Date.now()-parseInt(n[n.length-e],10)<t}};t.a=i},63:function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var s=window.Cookies,a=window.Cookies=i();a.noConflict=function(){return window.Cookies=s,a}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function t(n){function r(t,o,i){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},r.defaults,i)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(e){}o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var u="";for(var c in i)i[c]&&(u+="; "+c,!0!==i[c]&&(u+="="+i[c]));return document.cookie=t+"="+o+u}t||(s={});for(var f=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,d=0;d<f.length;d++){var p=f[d].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var v=p[0].replace(l,decodeURIComponent);if(h=n.read?n.read(h,v):n(h,v)||h.replace(l,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===v){s=h;break}t||(s[v]=h)}catch(e){}}return s}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}(function(){})})},91:function(e,t,n){"use strict";var r=n(41),o={setActionWithTimestamp:function(e,t){var n={action:e,timestamp:Date.now()};localStorage.setItem(t,JSON.stringify(n))},checkPromptStatus:function(e){var t=void 0===e?{}:e,n=t.deferMinAfterClose,r=void 0===n?2:n,o=t.deferMinAfterIgnore,i=void 0===o?1:o,s=JSON.parse(localStorage.getItem("bb-push-notification-prompt"));if(!s)return!0;var a={displayed:i,closed:r},u=s.action,c=s.timestamp;return!a[u]||Date.now()>parseInt(c)+60*a[u]*1e3},setPromptStatusDisplayed:function(){this.setActionWithTimestamp("displayed","bb-push-notification-prompt")},setPromptStatusClosed:function(){this.setActionWithTimestamp("closed","bb-push-notification-prompt")},isWebPushSupported:function(){return"Notification"in window?"serviceWorker"in navigator?"PushManager"in window||(console.log("PushManager is not supported"),!1):(console.log("serviceWorker is not supported"),!1):(console.log("Notification is not supported"),!1)},shouldEnforcePushPromptDisplay:function(){return"true"===new URL(window.location.href).searchParams.get("forceNotificationPrompt")},isWebNotificationsEnabled:function(){return!0},shouldDownloadPromptApp:function(e){var t=void 0===e?{}:e,n=t.showAfterPageViews,o=t.shouldDisplay,i=t.deferMinAfterClose,s=t.deferMinAfterIgnore;return!!this.isWebPushSupported()&&(!!this.shouldEnforcePushPromptDisplay()||!0===o&&(!!r.a.hasEnoughPageViews(n)&&("granted"!==Notification.permission&&"denied"!==Notification.permission&&(!!document.querySelector(".navi-push-notification-prompt")&&!!this.checkPromptStatus({deferMinAfterClose:i,deferMinAfterIgnore:s})))))}};t.a=o}});